<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    
    <title>WordPress启用memcached动态缓存以及报错解决 | JiFu&#39;s Wiki</title>
    
    
        <meta name="keywords" content="WordPress,memcached,缓存">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Memcahced | Memcachephp有memcached和memcache两个类似组件，百度搜出来的文章，大部分是教你如何安装memcache(d)，却步解释二者的区别。 memcache是 pecl 扩展库版本，原生支持php，出现更早，是老前辈； memcached是 libmemcached 版本，出现较后，是新一代，因此也更加完善，推荐使用。  Ps：如果想更深入了解，可以搜索">
<meta name="keywords" content="WordPress,memcached,缓存">
<meta property="og:type" content="article">
<meta property="og:title" content="WordPress启用memcached动态缓存以及报错解决">
<meta property="og:url" content="http://www.jifu.io/posts/1067246247/index.html">
<meta property="og:site_name" content="JiFu&#39;s Wiki">
<meta property="og:description" content="Memcahced | Memcachephp有memcached和memcache两个类似组件，百度搜出来的文章，大部分是教你如何安装memcache(d)，却步解释二者的区别。 memcache是 pecl 扩展库版本，原生支持php，出现更早，是老前辈； memcached是 libmemcached 版本，出现较后，是新一代，因此也更加完善，推荐使用。  Ps：如果想更深入了解，可以搜索">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://www.jifu.io/images/2/20190922233858.jpg">
<meta property="og:updated_time" content="2020-08-11T05:17:21.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="WordPress启用memcached动态缓存以及报错解决">
<meta name="twitter:description" content="Memcahced | Memcachephp有memcached和memcache两个类似组件，百度搜出来的文章，大部分是教你如何安装memcache(d)，却步解释二者的区别。 memcache是 pecl 扩展库版本，原生支持php，出现更早，是老前辈； memcached是 libmemcached 版本，出现较后，是新一代，因此也更加完善，推荐使用。  Ps：如果想更深入了解，可以搜索">
<meta name="twitter:image" content="https://www.jifu.io/images/2/20190922233858.jpg">
    

    
        <link rel="alternate" href="/atom.xml" title="JiFu&#39;s Wiki" type="application/atom+xml">
    

    
        <link rel="icon" href="/favicon.ico">
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">
    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    
        <script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?efa1eb5f56c438a850a0f60609fd7755";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>

    


<link rel="stylesheet" href="/css/prism-duotone-light.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>
</html>
<body>
    <div id="container">
        <script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

<header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">JiFu&#39;s Wiki</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap" id='categories'>
        <h3 class="widget-title">
            <span>categories</span>
            &nbsp;
            <a id='allExpand' href="#">
                <i class="fa fa-angle-double-up fa-2x"></i>
            </a>
        </h3>

        
        
         <ul class="unstyled" id="tree" style="display: block;"> 
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                HR
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/3142539384/">HR常用的招聘邮件模板</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Hardware
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/3904818761/">MacBook十年进化史</a></li>  </ul> 
                        </li>
                        
                        <li class="directory-open" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder-open"></i>
                                &nbsp;
                                OPS
                            </a>
                             <ul class="unstyled" id="tree" style="display: block;"> 
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Docker
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/1245529498/">Docker学习笔记</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Editor
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/4167799419/">Build personal development editor with vscode</a></li>  <li class="file"><a href="/posts/151598530/">VScdoe error:Could not create temporary directory Permission denied</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder-open"></i>
                                &nbsp;
                                Linux
                            </a>
                             <ul class="unstyled" id="tree" style="display: block;"> 
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                CentOS
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/920993072/">CentOS update Ruby</a></li>  <li class="file"><a href="/posts/1867760035/">CentOS7编译安装VIM8</a></li>  <li class="file"><a href="/posts/1153610031/">centos7修改启动内核，删除无用内核</a></li>  <li class="file"><a href="/posts/4057676473/">yum提示Error: rpmdb open failed的解决方案</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                System Service
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/4024224000/">Linux swap分区及作用详解</a></li>  <li class="file"><a href="/posts/797311580/">服务管理工具 - systemctl</a></li>  <li class="file"><a href="/posts/709002730/">使用 systemctl 添加自定义服务</a></li>  <li class="file"><a href="/posts/55221137/">防火墙工具 - firewalld</a></li>  </ul> 
                        </li>
                         <li class="file"><a href="/posts/3897848060/">Mac使用SSH登录Google Cloud Platform</a></li>  <li class="file"><a href="/posts/4070386720/">Linux系统目录结构及详细说明</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                MacOS
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/4001059579/">Compiling PyQt5 for Python2.7 on Mac OS</a></li>  <li class="file"><a href="/posts/3746871293/">Charles从入门到精通</a></li>  <li class="file"><a href="/posts/581320548/">Homebrew：让你从 Mac 切换到 Linux 更轻松</a></li>  <li class="file"><a href="/posts/662287335/">MACOS BOOT CAMP – THE STARTUP DISK DOES NOT HAVE ENOUGH SPACE TO BE PARTITIONED</a></li>  <li class="file"><a href="/posts/4147446761/">Mac 时间机器 Time Machine 备份速度太慢的解决方法 (加速备份命令)</a></li>  <li class="file"><a href="/posts/1883980072/">Mac OS系统加速：干掉那些「炫酷」的动画</a></li>  <li class="file"><a href="/posts/3837318570/">Mac VSCode 禁用GPU加速</a></li>  <li class="file"><a href="/posts/2733308530/">Mac定时任务-利用launchctl定时启动任务</a></li>  <li class="file"><a href="/posts/294187676/">Mac版迅雷优化,删除无用插件</a></li>  <li class="file"><a href="/posts/1208074722/">Mac重置系统管理控制器SMC</a></li>  <li class="file"><a href="/posts/582618556/">Mac的最大连接数限制和端口的相关参数的设置</a></li>  <li class="file"><a href="/posts/3366946474/">Mac高效使用技巧</a></li>  <li class="file"><a href="/posts/1070186292/">SafariBookmarksSyncAgent意外退出解决方法</a></li>  <li class="file"><a href="/posts/2768996547/">一览Mac OS 图形界面的发展史</a></li>  <li class="file"><a href="/posts/1623087360/">修复破解Mac应用启动时闪退（原因是由于苹果移除了TNT证书）</a></li>  <li class="file"><a href="/posts/646546052/">如何查看 macOS 系统日志，辅助排除应用程序和系统故障</a></li>  <li class="file"><a href="/posts/3920589165/">如何重置Mac上的NVRAM</a></li>  <li class="file"><a href="/posts/1207571108/">强制退出Mac程序的六种方法</a></li>  <li class="file"><a href="/posts/3807466731/">如何彻底和CrossOver说GoodBye</a></li>  <li class="file"><a href="/posts/3430780623/">解决Mac修改DNS卡死-命令行修改Mac OS系统DNS设置</a></li>  <li class="file"><a href="/posts/558776221/">解决“Mac应用”已损坏，无法打开的问题</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Others
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/2867836530/">Axel:命令行下轻量级多线程下载程序</a></li>  <li class="file"><a href="/posts/3101956195/">Git中.gitignore无效的解决办法</a></li>  <li class="file"><a href="/posts/3784546227/">Git忽略提交规则 - .gitignore配置总结</a></li>  <li class="file"><a href="/posts/3413649842/">Linux实用工具</a></li>  <li class="file"><a href="/posts/1073812833/">linux下测试磁盘的读写IO速度(IO物理测速)</a></li>  <li class="file"><a href="/posts/3895039994/">命令行信息截图工具 - ScreenFetch</a></li>  <li class="file"><a href="/posts/760033837/">平铺式窗口管理器 - Awesome</a></li>  <li class="file"><a href="/posts/2006196850/">私有化TM备份与共享服务器 - Netatalk</a></li>  <li class="file"><a href="/posts/1413974522/">用好这些隐藏「小开关」，让 Chrome 浏览器更好用</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Vim
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/258379777/">VIM下使用Vundle搭建python开发环境</a></li>  <li class="file"><a href="/posts/3374749959/">Vim快捷键使用总结</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Windows
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/913943227/">解决EXCEL按上下左右键不是单元格移动的问题</a></li>  <li class="file"><a href="/posts/3426016246/">利用windows内置工具测试硬盘速度 - winsat</a></li>  </ul> 
                        </li>
                        
                        <li class="directory-open" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Wordpress
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file active"><a href="/posts/1067246247/">WordPress启用memcached动态缓存以及报错解决</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                command
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/3200906184/">find命令快速技巧：如何定位一个文件</a></li>  <li class="file"><a href="/posts/2407250830/">history命令设置linux查看历史命令显示执行时间</a></li>  <li class="file"><a href="/posts/3403344661/">定时任务Crontab命令详解</a></li>  <li class="file"><a href="/posts/3241041753/">通过编写 chroot 来认识 chroot 发挥的作用和它带来的好处</a></li>  </ul> 
                        </li>
                         <li class="file"><a href="/posts/404814820/">DevOps简介</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder-open"></i>
                                &nbsp;
                                Soft engineering
                            </a>
                             <ul class="unstyled" id="tree" style="display: block;"> 
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Algorithm
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/1453950584/">8大排序算法图文讲解</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Cheat Sheets
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/2623330927/">Cheat Sheets - PostgreSQL</a></li>  <li class="file"><a href="/posts/4169548679/">Cheat Sheets - .NET</a></li>  <li class="file"><a href="/posts/3048024619/">Cheat Sheets - Django Reference Sheet</a></li>  <li class="file"><a href="/posts/3433268710/">Cheat Sheets - Shell Script</a></li>  <li class="file"><a href="/posts/2993634676/">Cheat Sheets - Git</a></li>  <li class="file"><a href="/posts/3327139081/">Cheat Sheets – C++</a></li>  <li class="file"><a href="/posts/305297407/">Cheat Sheets – C</a></li>  <li class="file"><a href="/posts/2137528313/">Cheat Sheets – CSS</a></li>  <li class="file"><a href="/posts/59285358/">Cheat Sheets – HTML and XHTML</a></li>  <li class="file"><a href="/posts/3766000533/">Cheat Sheets – HTTP</a></li>  <li class="file"><a href="/posts/982990798/">Cheat Sheets – Linux</a></li>  <li class="file"><a href="/posts/2663199359/">Cheat Sheets – Java</a></li>  <li class="file"><a href="/posts/316669616/">Cheat Sheets – Mac OS X</a></li>  <li class="file"><a href="/posts/2038387758/">Cheat Sheets – MySQL</a></li>  <li class="file"><a href="/posts/2920272111/">Cheat Sheets – Nodejs</a></li>  <li class="file"><a href="/posts/1362596080/">Cheat Sheets – PHP</a></li>  <li class="file"><a href="/posts/3167589601/">Cheat Sheets – Perl</a></li>  <li class="file"><a href="/posts/1053003126/">Cheat Sheets – Python</a></li>  <li class="file"><a href="/posts/1130312566/">Cheat Sheets – SQLite</a></li>  <li class="file"><a href="/posts/4169548678/">Cheat Sheets - Photoshop</a></li>  <li class="file"><a href="/posts/3586350539/">Cheat sheets - Mac OS</a></li>  <li class="file"><a href="/posts/2789789845/">Cheat Sheets – jQuery</a></li>  <li class="file"><a href="/posts/3905631645/">Cheat sheets - Xcode</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Project
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/1755831586/">软件发布版本区别介绍</a></li>  <li class="file"><a href="/posts/467054247/">如何编写开源项目的README文档</a></li>  </ul> 
                        </li>
                         </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                UI Design
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/1907494021/">PS快捷键使用指南</a></li>  <li class="file"><a href="/posts/1525329016/">提高效率！24 个高手常用的 Sketch 技巧合集（附实用快捷键）</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder-open"></i>
                                &nbsp;
                                back-end
                            </a>
                             <ul class="unstyled" id="tree" style="display: block;"> 
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder-open"></i>
                                &nbsp;
                                Middle-ware
                            </a>
                             <ul class="unstyled" id="tree" style="display: block;"> 
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Gogs
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/4076369309/">Gogs数据备份、恢复</a></li>  <li class="file"><a href="/posts/612684965/">私人Git服务器 -- gogs</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Jenkins
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/2282359188/">jenkins密码重置</a></li>  <li class="file"><a href="/posts/388825549/">利用Jenkins持续集成iOS项目</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Logstash
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/2615120416/">日志搜集处理框架Logstash-安装配置</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                MySQL
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/2625460784/">MySQL延迟复制</a></li>  <li class="file"><a href="/posts/4284065059/">MySQL 调优/优化的 101 个建议</a></li>  <li class="file"><a href="/posts/2654174479/">分库分表 vs NewSQL数据库</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Nginx
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/3996389515/">Nginx配置跨域请求 Access-Control-Allow-Origin *</a></li>  <li class="file"><a href="/posts/1544228005/">高性能Web服务器 - Nginx配置详解</a></li>  <li class="file"><a href="/posts/524919010/">Nginx正向代理与Client设置代理上网</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                RabbitMQ
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/3135873234/">RabbitMQ入门</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Redis
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/156114019/">Redis Stream应用案例</a></li>  <li class="file"><a href="/posts/2992538737/">redis.conf参数配置及解释</a></li>  <li class="file"><a href="/posts/2864310564/">深入分析Redis特点及应用场景</a></li>  <li class="file"><a href="/posts/3909951181/">Redis Manual</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Sentry
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/1303728868/">错误日志收集平台 - Sentry(Redis+MySQL)</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Shadowsocks
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/3154796955/">Vultr快速搭建SS科学上网</a></li>  </ul> 
                        </li>
                         </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                NodeJS
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/2653381572/">NodeJS Package Manage Tool - NPM</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder-open"></i>
                                &nbsp;
                                Python
                            </a>
                             <ul class="unstyled" id="tree" style="display: block;"> 
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Build-in
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/2858153934/">Python build-in functions - collections</a></li>  <li class="file"><a href="/posts/857250976/">Python build-in functions - List</a></li>  <li class="file"><a href="/posts/2434599799/">Python build-in functions</a></li>  <li class="file"><a href="/posts/3208674450/">Python build-in module - os</a></li>  <li class="file"><a href="/posts/5/">Python多线程和锁</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Configuration
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/3568487154/">更改pip源至国内镜像 - 显著提升下载速度</a></li>  </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Library
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/383305840/">Python Library - Flask SQLAlchemy</a></li>  <li class="file"><a href="/posts/4096440342/">Python Library - SQLAlchemy</a></li>  <li class="file"><a href="/posts/55626181/">发布你自己的轮子 - PyPI打包上传实践</a></li>  </ul> 
                        </li>
                         <li class="file"><a href="/posts/272954362/">sys.stdout.write实现Python控制台实时刷新打印</a></li>  </ul> 
                        </li>
                         </ul> 
                        </li>
                        
                        <li class="directory" id="">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                iOS Dev
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/posts/1054462359/">Apple Store上iOS App上架流程</a></li>  <li class="file"><a href="/posts/1098789015/">Xcode开发中Build与version区别/build自增设置/build随时间变化？</a></li>  </ul> 
                        </li>
                         </ul> 
    </div>
    <script>
        $(document).ready(function() {
            var iconFolderOpenClass  = 'fa-folder-open';
            var iconFolderCloseClass = 'fa-folder';
            var iconAllExpandClass = 'fa-angle-double-down';
            var iconAllPackClass = 'fa-angle-double-up';
            // Handle directory-tree expansion:
            // 左键单独展开目录
            $(document).on('click', '#categories a[data-role="directory"]', function (event) {
                event.preventDefault();

                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var subtree = $(this).siblings('ul');
                icon.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if (expanded) {
                    if (typeof subtree != 'undefined') {
                        subtree.slideUp({ duration: 100 });
                    }
                    icon.addClass(iconFolderCloseClass);
                } else {
                    if (typeof subtree != 'undefined') {
                        subtree.slideDown({ duration: 100 });
                    }
                    icon.addClass(iconFolderOpenClass);
                }
            });
            // 右键展开下属所有目录
            $('#categories a[data-role="directory"]').bind("contextmenu", function(event){
                event.preventDefault();

                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var listNode = $(this).siblings('ul');
                var subtrees = $.merge(listNode.find('li ul'), listNode);
                var icons = $.merge(listNode.find('.fa'), icon);
                icons.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if(expanded) {
                    subtrees.slideUp({ duration: 100 });
                    icons.addClass(iconFolderCloseClass);
                } else {
                    subtrees.slideDown({ duration: 100 });
                    icons.addClass(iconFolderOpenClass);
                }
            })
            // 展开关闭所有目录按钮
            $(document).on('click', '#allExpand', function (event) {
                event.preventDefault();

                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconAllExpandClass);
                icon.removeClass(iconAllExpandClass).removeClass(iconAllPackClass);
                if(expanded) {
                    $('#sidebar .fa.fa-folder').removeClass('fa-folder').addClass('fa-folder-open')
                    $('#categories li ul').slideDown({ duration: 100 });
                    icon.addClass(iconAllPackClass);
                } else {
                    $('#sidebar .fa.fa-folder-open').removeClass('fa-folder-open').addClass('fa-folder')
                    $('#categories li ul').slideUp({ duration: 100 });
                    icon.addClass(iconAllExpandClass);
                }
            });
        });
    </script>


    
        
    <div class="widget-wrap">
        <h3 class="widget-title"><span>recent</span></h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/posts/581320548/" class="thumbnail">
    
    
        <span style="background-image:url(https://www.jifu.io/images/2/homebrew-social-card.png)" alt="Homebrew：让你从 Mac 切换到 Linux 更轻松" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/OPS/">OPS</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/OPS/MacOS/">MacOS</a></p>
                            <p class="item-title"><a href="/posts/581320548/" class="title">Homebrew：让你从 Mac 切换到 Linux 更轻松</a></p>
                            <p class="item-date"><time datetime="2020-09-25T12:03:23.000Z" itemprop="datePublished">2020-09-26</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/posts/3895039994/" class="thumbnail">
    
    
        <span style="background-image:url(https://www.jifu.io/images/2/20190427135657.jpg)" alt="命令行信息截图工具 - ScreenFetch" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/OPS/">OPS</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/OPS/Others/">Others</a></p>
                            <p class="item-title"><a href="/posts/3895039994/" class="title">命令行信息截图工具 - ScreenFetch</a></p>
                            <p class="item-date"><time datetime="2020-08-11T05:17:21.000Z" itemprop="datePublished">2020-08-11</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/posts/1413974522/" class="thumbnail">
    
    
        <span style="background-image:url(https://www.jifu.io/images/posts/1413974522/223592376156316015.jpg)" alt="用好这些隐藏「小开关」，让 Chrome 浏览器更好用" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/OPS/">OPS</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/OPS/Others/">Others</a></p>
                            <p class="item-title"><a href="/posts/1413974522/" class="title">用好这些隐藏「小开关」，让 Chrome 浏览器更好用</a></p>
                            <p class="item-date"><time datetime="2019-12-17T13:14:30.000Z" itemprop="datePublished">2019-12-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/posts/4024224000/" class="thumbnail">
    
    
        <span style="background-image:url(https://www.jifu.io/images/2/20191116165053.png)" alt="Linux swap分区及作用详解" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/OPS/">OPS</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/OPS/Linux/">Linux</a></p>
                            <p class="item-title"><a href="/posts/4024224000/" class="title">Linux swap分区及作用详解</a></p>
                            <p class="item-date"><time datetime="2019-11-16T03:44:24.000Z" itemprop="datePublished">2019-11-16</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/posts/151598530/" class="thumbnail">
    
    
        <span style="background-image:url(https://www.jifu.io/images/2/20191028214328.png)" alt="VScdoe error:Could not create temporary directory Permission denied" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/OPS/">OPS</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/OPS/Editor/">Editor</a></p>
                            <p class="item-title"><a href="/posts/151598530/" class="title">VScdoe error:Could not create temporary directory Permission denied</a></p>
                            <p class="item-date"><time datetime="2019-10-28T08:42:49.000Z" itemprop="datePublished">2019-10-28</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
            <section id="main"><article id="post-OPS/Wordpress/WordPress启用memcached动态缓存以及报错解决" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/OPS/">OPS</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/OPS/Wordpress/">Wordpress</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/WordPress/">WordPress</a>, <a class="tag-link" href="/tags/memcached/">memcached</a>, <a class="tag-link" href="/tags/缓存/">缓存</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/posts/1067246247/">
            <time datetime="2019-09-22T11:22:57.000Z" itemprop="datePublished">2019-09-22</time>
        </a>
    </div>


                        
                    </div>
                
                
    
        <h1 class="article-title" itemprop="name">
            WordPress启用memcached动态缓存以及报错解决
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
                <div id="toc" class="toc-article">
                <strong class="toc-title">Catalogue</strong>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Memcahced-Memcache"><span class="toc-number">1.</span> <span class="toc-text">Memcahced | Memcache</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#memcache"><span class="toc-number">1.1.</span> <span class="toc-text">memcache</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#memcached"><span class="toc-number">1.2.</span> <span class="toc-text">memcached</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#部署memcached"><span class="toc-number">2.</span> <span class="toc-text">部署memcached</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装memcached"><span class="toc-number">2.1.</span> <span class="toc-text">安装memcached</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#在线安装"><span class="toc-number">2.1.1.</span> <span class="toc-text">在线安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编译安装"><span class="toc-number">2.1.2.</span> <span class="toc-text">编译安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#集成php-memcached拓展"><span class="toc-number">2.2.</span> <span class="toc-text">集成php-memcached拓展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#先安装libmemcached"><span class="toc-number">2.2.1.</span> <span class="toc-text">先安装libmemcached</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装php-memcached组件"><span class="toc-number">2.2.2.</span> <span class="toc-text">安装php-memcached组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#测试缓存"><span class="toc-number">2.2.3.</span> <span class="toc-text">测试缓存</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#WordPress缓存"><span class="toc-number">3.</span> <span class="toc-text">WordPress缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装插件"><span class="toc-number">3.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看效果"><span class="toc-number">3.2.</span> <span class="toc-text">查看效果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他设置"><span class="toc-number">3.3.</span> <span class="toc-text">其他设置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#纯静态缓存"><span class="toc-number">4.</span> <span class="toc-text">纯静态缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#下载安装"><span class="toc-number">4.1.</span> <span class="toc-text">下载安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#启用缓存"><span class="toc-number">4.2.</span> <span class="toc-text">启用缓存</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参数调整"><span class="toc-number">4.3.</span> <span class="toc-text">参数调整</span></a></li></ol></li></ol>
                </div>
            
        
        
            <p><img src="https://www.jifu.io/images/2/20190922233858.jpg" alt=""></p>
<h1 id="Memcahced-Memcache"><a href="#Memcahced-Memcache" class="headerlink" title="Memcahced | Memcache"></a>Memcahced | Memcache</h1><p>php有memcached和memcache两个类似组件，百度搜出来的文章，大部分是教你如何安装memcache(d)，却步解释二者的区别。</p>
<h2 id="memcache"><a href="#memcache" class="headerlink" title="memcache"></a>memcache</h2><p>是 pecl 扩展库版本，原生支持php，出现更早，是老前辈；</p>
<h2 id="memcached"><a href="#memcached" class="headerlink" title="memcached"></a>memcached</h2><p>是 libmemcached 版本，出现较后，是新一代，因此也更加完善，推荐使用。</p>
<blockquote>
<p>Ps：如果想更深入了解，可以搜索下 memcache vs memcached</p>
</blockquote>
<p>其实，我们这种小网站的话，二选一即可，这点QPS还不至于纠结。不过一旦选择了，安装的时候就要注意区分，一对一配套安装，别搞的牛头不对马嘴，出现上面那位仁兄的困惑（后文有相关说明）。</p>
<p>这里，我果断选择了带d的，继续分享。</p>
<h1 id="部署memcached"><a href="#部署memcached" class="headerlink" title="部署memcached"></a>部署memcached</h1><h2 id="安装memcached"><a href="#安装memcached" class="headerlink" title="安装memcached"></a>安装memcached</h2><blockquote>
<p>Ps：这里的memcached是指Mencached的服务端，用来处理缓存数据，名字也是容易混淆。</p>
</blockquote>
<p>下面2种安装方式任选其一：</p>
<h3 id="在线安装"><a href="#在线安装" class="headerlink" title="在线安装"></a>在线安装</h3><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># Centos直接使用yum安装即可，其他系统自行搜索安装命令，比如ubuntu</span>
yum -y <span class="token function">install</span> memcached
<span class="token comment" spellcheck="true"># 启动memcached</span>
<span class="token function">service</span> memcached start
<span class="token comment" spellcheck="true"># 开机启动</span>
<span class="token function">chkconfig</span> memcached on
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h3><p>相比在线安装，很多时候编译安装更加灵活，非常类似Windows平台的自定义安装或绿色安装，推荐熟悉 Linux 系统的朋友使用：</p>
<a id="more"></a>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 从官方下载最新源码包</span>
<span class="token function">wget</span> http://memcached.org/files/memcached-1.4.25.tar.gz
<span class="token comment" spellcheck="true">#解压开始编译安装</span>
<span class="token function">tar</span> xzvf memcached-1.4.15.tar.gz
<span class="token function">cd</span> memcached-1.4.15
./configure --prefix<span class="token operator">=</span>/usr/local/memcached
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
<span class="token function">cd</span> <span class="token punctuation">..</span>
<span class="token comment" spellcheck="true">#设置环境</span>
<span class="token function">ln</span> -s /usr/local/memcached/bin/memcached /usr/bin/memcached
<span class="token function">cp</span> scripts/memcached.sysv /etc/init.d/memcached
<span class="token comment" spellcheck="true">#改为监听127.0.0.1，并关闭UDP连接方式，若为远程服务调用或不需要的话请跳过此行</span>
<span class="token function">sed</span> -i <span class="token string">'s/OPTIONS=""/OPTIONS="-l 127.0.0.1 -U 0"/g'</span> /etc/init.d/memcached

<span class="token function">sed</span> -i <span class="token string">'s@chown@#chown@'</span> /etc/init.d/memcached
<span class="token function">sed</span> -i <span class="token string">'s@/var/run/memcached/memcached.pid@/var/run/memcached.pid@'</span> /etc/init.d/memcached
<span class="token comment" spellcheck="true">#启动并设置开机服务</span>
<span class="token function">chmod</span> +x /etc/init.d/memcached
<span class="token function">service</span> memcached start
<span class="token function">chkconfig</span> --add memcached
<span class="token function">chkconfig</span> memcached on
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>至此memcached的服务端就安装好了。</p>
<h2 id="集成php-memcached拓展"><a href="#集成php-memcached拓展" class="headerlink" title="集成php-memcached拓展"></a>集成php-memcached拓展</h2><h3 id="先安装libmemcached"><a href="#先安装libmemcached" class="headerlink" title="先安装libmemcached"></a>先安装libmemcached</h3><p>提前分享一个问题，如果直接按照网上的教程安装php-memcached可能会报如下错误：</p>
<p><code>configure: error: no, sasl.h is not available. Run configure with –disable-memcached-sasl to disable this check</code></p>
<p>大部分教程会使用 –disable-memcached-sasl 参数来禁用这个功能，作为一个强迫症，我还是从国外的论坛扒到了解决方法，很简单，在编译libmemcached之前，先安装cyrus-sasl-devel即可解决</p>
<pre class="line-numbers language-bash"><code class="language-bash">yum <span class="token function">install</span> cyrus-sasl-devel
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>接着开始编译安装libmemcached：</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">wget</span> https://launchpad.net/libmemcached/1.0/1.0.18/+download/libmemcached-1.0.18.tar.gz
<span class="token function">tar</span> xzf libmemcached-1.0.18.tar.gz
<span class="token function">cd</span> libmemcached-1.0.18
./configure --with-memcached<span class="token operator">=</span>/usr/local/memcached --prefix<span class="token operator">=</span>/usr/local/libmemcached
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
<span class="token function">cd</span> <span class="token punctuation">..</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="安装php-memcached组件"><a href="#安装php-memcached组件" class="headerlink" title="安装php-memcached组件"></a>安装php-memcached组件</h3><p>下载和解压这步，我们要区分下是php7还是之前的版本：</p>
<p>1、如果当前环境是php7 ：</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#从github下载PHP7专用的memcached组件分支</span>
<span class="token function">wget</span> https://github.com/php-memcached-dev/php-memcached/archive/php7.zip
<span class="token comment" spellcheck="true">#解压备用</span>
unzip php7.zip
<span class="token function">cd</span> php-memcached-php7
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>2、如果是旧的的php版本：</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#从官方下载php-memcached的最新源码包</span>
<span class="token function">wget</span> http://pecl.php.net/get/memcached-2.2.0.tgz
<span class="token comment" spellcheck="true">#解压和编译</span>
<span class="token function">tar</span> zxvf memcached-2.2.0.tgz
<span class="token function">cd</span> memcached-2.2.0
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>接下来开始编译：</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#注意已有php的实际路径</span>
/usr/local/php/bin/phpize
./configure --with-php-config<span class="token operator">=</span>/usr/local/php/bin/php-config
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>编辑php.ini文件，在最后插入如下参数</p>
<pre><code>
extension=memcached.so
</code></pre><p>Ps：如果不知道php.ini在哪个位置 ？ 执行命令：php –ini 即可找到。</p>
<p>保存后，执行如下命令看看是否加载成功：</p>
<pre class="line-numbers language-bash"><code class="language-bash">php -m <span class="token operator">|</span> <span class="token function">grep</span> memcached
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果输出memcached则表示成功。</p>
<p>最后，如果是Nginx就 service php-fpm reload ，如果是Apache就重启Apache完成安装。</p>
<h3 id="测试缓存"><a href="#测试缓存" class="headerlink" title="测试缓存"></a>测试缓存</h3><pre class="line-numbers language-bash"><code class="language-bash"><span class="token operator">&lt;</span>?php
<span class="token variable">$m</span> <span class="token operator">=</span> new Memcached<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$m</span>-<span class="token operator">></span>addServer<span class="token punctuation">(</span> <span class="token string">'127.0.0.1'</span>, 11211 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$m</span>-<span class="token operator">></span>set<span class="token punctuation">(</span> <span class="token string">'foo'</span>, 100 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$m</span>-<span class="token operator">></span>get<span class="token punctuation">(</span> <span class="token string">'foo'</span> <span class="token punctuation">)</span> <span class="token keyword">.</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>将上述代码保存为 test.php，然后执行 php -f test.php，如果能输出100表示安装成功。</p>
<h1 id="WordPress缓存"><a href="#WordPress缓存" class="headerlink" title="WordPress缓存"></a>WordPress缓存</h1><p>做完上述所有步骤，系统环境就已经支持memcached缓存了。下面分享如何应用到WordPress</p>
<h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><p>访问github项目页面下载插件包：</p>
<p><a href="https://github.com/tollmanz/wordpress-pecl-memcached-object-cache" target="_blank" rel="noopener">https://github.com/tollmanz/wordpress-pecl-memcached-object-cache</a></p>
<p>下载并解压得到的 object-cache.php，上传到 wp-content 目录即可开启memcached缓存。</p>
<p>值得说明的是，这里还有一个大坑等着你来踩：</p>
<pre><code>WordPress官网上的object-cache.php虽然也号称Memcached 插件，然而它只支持Memcache，不支持新版的，所以不能使用。如果错误地将object-cache.php和Memcached混用的话，则会出现WordPress打不开，前台后台页面一片空白的现象。
</code></pre><p>这也就是经常有站长反馈WordPress启用memcached功能后，页面空白的错误原因了。不巧，张戈在测试的时候也踩坑了，所以特别提出来，希望大家了解错误的原因，规避掉！</p>
<h2 id="查看效果"><a href="#查看效果" class="headerlink" title="查看效果"></a>查看效果</h2><p>做完第2步之后，你可以去网站前台刷新几次，产生缓存，然后从官方下载探针：</p>
<p><a href="http://pecl.php.net/get/memcache-3.0.8.tgz" target="_blank" rel="noopener">http://pecl.php.net/get/memcache-3.0.8.tgz</a></p>
<p>解压后，里面有一个memcache.php文件，编辑并找到如下代码：</p>
<pre class="line-numbers language-bash"><code class="language-bash">define<span class="token punctuation">(</span><span class="token string">'ADMIN_USERNAME'</span>,<span class="token string">'memcache'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    // Admin Username
define<span class="token punctuation">(</span><span class="token string">'ADMIN_PASSWORD'</span>,<span class="token string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    // Admin Password
define<span class="token punctuation">(</span><span class="token string">'DATE_FORMAT'</span>,<span class="token string">'Y/m/d H:i:s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
define<span class="token punctuation">(</span><span class="token string">'GRAPH_SIZE'</span>,200<span class="token punctuation">)</span><span class="token punctuation">;</span>
define<span class="token punctuation">(</span><span class="token string">'MAX_ITEM_DUMP'</span>,50<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$MEMCACHE_SERVERS</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'mymemcache-server1:11211'</span><span class="token punctuation">;</span> // add <span class="token function">more</span> as an array
<span class="token variable">$MEMCACHE_SERVERS</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'mymemcache-server2:11211'</span><span class="token punctuation">;</span> // add <span class="token function">more</span> as an array
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>修改如下：</p>
<pre class="line-numbers language-bash"><code class="language-bash">define<span class="token punctuation">(</span><span class="token string">'ADMIN_USERNAME'</span>,<span class="token string">'memcache'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    // Admin Username 登录名称，自行修改
define<span class="token punctuation">(</span><span class="token string">'ADMIN_PASSWORD'</span>,<span class="token string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    // Admin Password 登录密码，自行修改
define<span class="token punctuation">(</span><span class="token string">'DATE_FORMAT'</span>,<span class="token string">'Y/m/d H:i:s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
define<span class="token punctuation">(</span><span class="token string">'GRAPH_SIZE'</span>,200<span class="token punctuation">)</span><span class="token punctuation">;</span>
define<span class="token punctuation">(</span><span class="token string">'MAX_ITEM_DUMP'</span>,50<span class="token punctuation">)</span><span class="token punctuation">;</span>
//下面是定义memcached服务器，一般我们是单机部署，所以注释掉一行，并将服务器地址根据实际修改，比如本文是127.0.0.1
<span class="token variable">$MEMCACHE_SERVERS</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'127.0.0.1:11211'</span><span class="token punctuation">;</span> // add <span class="token function">more</span> as an array
//<span class="token variable">$MEMCACHE_SERVERS</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'mymemcache-server2:11211'</span><span class="token punctuation">;</span> // add <span class="token function">more</span> as an array
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>上传到网站私密目录（临时测试可以放到根目录），然后通过前台访问memcache.php这个文件，输入上面的用户名和密码即可看到memcached状态：</p>
<p><a href="https://www.jifu.io/images/2/20190922233015.png"></a></p>
<h2 id="其他设置"><a href="#其他设置" class="headerlink" title="其他设置"></a>其他设置</h2><p>如果发现页面可以打开，但是里面没有Hits数据，说明WordPress并没有成功连接到memcached，这时候我们可以在wp-config.php加入如下参数：</p>
<pre class="line-numbers language-bash"><code class="language-bash">global <span class="token variable">$memcached_servers</span><span class="token punctuation">;</span>
<span class="token variable">$memcached_servers</span> <span class="token operator">=</span> array<span class="token punctuation">(</span>
    array<span class="token punctuation">(</span>
        <span class="token string">'127.0.0.1'</span>, // Memcached server IP address
         11211        // Memcached server port
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>实际的memcached监听IP和端口，你可以通过如下命令查看：</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">netstat</span> -nutlp <span class="token operator">|</span> <span class="token function">grep</span> memcache
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1 id="纯静态缓存"><a href="#纯静态缓存" class="headerlink" title="纯静态缓存"></a>纯静态缓存</h1><p>实际上memcached可以缓存动态查询数据，他也可以缓存html内容！因此，memcached也能实现和其他方案一样的html纯净态缓存！</p>
<p>实现原理和我之前分享的php代码缓存html方案类似，不过后者更好的是将缓存内容放在了内存当中，速度比放硬盘快的绝对不是一点点。</p>
<p>如何将前台页面html都缓存到memcached中呢？这里，我们需要用到 batcache 这款插件。</p>
<h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><p>直接在WordPress后台搜索安装 batcache ，也可以从官方下载插件包：</p>
<p><a href="https://wordpress.org/plugins/batcache/" target="_blank" rel="noopener">https://wordpress.org/plugins/batcache/</a></p>
<p>然后解压得到 advanced-cache.php 上传到wp-content即可。</p>
<h2 id="启用缓存"><a href="#启用缓存" class="headerlink" title="启用缓存"></a>启用缓存</h2><p>在wp-config.php中启用缓存：</p>
<pre class="line-numbers language-bash"><code class="language-bash">define<span class="token punctuation">(</span><span class="token string">'WP_CACHE'</span>, true<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>不过，插件默认只会对游客缓存，显然也是怕影响到前台登录态。缓存和动态判断一直是矛与盾、鱼和熊掌，看个人抉择吧。</p>
<h2 id="参数调整"><a href="#参数调整" class="headerlink" title="参数调整"></a>参数调整</h2><pre class="line-numbers language-bash"><code class="language-bash">var <span class="token variable">$max_age</span> <span class="token operator">=</span>  3600<span class="token punctuation">;</span> // Expire batcache items aged this many seconds <span class="token punctuation">(</span>zero to disable batcache<span class="token punctuation">)</span>
var <span class="token variable">$remote</span>  <span class="token operator">=</span>    0<span class="token punctuation">;</span> // Zero disables sending buffers to remote datacenters <span class="token punctuation">(</span>req/sec is never sent<span class="token punctuation">)</span>
var <span class="token variable">$times</span>   <span class="token operator">=</span>    2<span class="token punctuation">;</span> // Only batcache a page after it is accessed this many times<span class="token punctuation">..</span>. <span class="token punctuation">(</span>two or more<span class="token punctuation">)</span>
var <span class="token variable">$seconds</span> <span class="token operator">=</span>  0<span class="token punctuation">;</span> // <span class="token punctuation">..</span>.in this many seconds <span class="token punctuation">(</span>zero to ignore this and use batcache immediately<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>max_age代表缓存过期时间（以秒为单位），times表示访问多少次才创建缓存（2是最小值），seconds表示在多少秒之后才创建缓存（0表示立即）</p>

            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>


    
<nav id="article-nav">
    
        <a href="/posts/3897848060/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Newer</strong>
            <div class="article-nav-title">
                
                    Mac使用SSH登录Google Cloud Platform
                
            </div>
        </a>
    
    
        <a href="/posts/3996389515/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">Nginx配置跨域请求 Access-Control-Allow-Origin *</div>
        </a>
    
</nav>





    
    




<!-- baidu url auto push script -->
<script type="text/javascript">
    !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
</script>     

<head><meta name="generator" content="Hexo 3.9.0">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<link rel="stylesheet" href="/css/prism-duotone-light.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>
<body>
    <div id="vcomments"></div>
    <script>
        new Valine({
            el: '#vcomments',
            appId: '8kLhebBkVygl1MhVcQx9dnBP-gzGzoHsz',
            appKey: 'hrctlOb6RQBWjjwTJ9fVjb91'
        })
    </script>
</body>


</section>
        </div>
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            <a href="https://www.jifu.io">
            Ji Fu &copy; 2020
            </a>
            <br> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme - <a href="https://github.com/zthxxx/hexo-theme-Wikitten">wikitten</a>
            <br> 您是  jifu'wiki 的第<span id="busuanzi_value_site_uv"></span>个小伙伴
            <br>
                本站总访问量<span id="busuanzi_value_site_pv"></span>次
                本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        </div>
    </div>
</footer>



        

    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>